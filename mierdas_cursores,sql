CREATE TRIGGER non_valid_tap_movies
BEFORE INSERT OR UPDATE ON taps_movies
FOR EACH ROW
DECLARE
CURSOR c1 IS
	SELECT enddate INTO end_date
	 FROM contracts;
CURSOR c2 IS
	SELECT startdate INTO start_date
	FROM contracts;
BEGIN
open c1;
open c2;
IF (:NEW.view_datetime > end_date) OR (:NEW.view_datetime > start_date)
THEN RAISE bad_date;
END IF;
EXCEPTION
WHEN bad_date THEN
DBMS_OUTPUT.PUT_LINE('There cannot be taps in a date out of contract!');
close c1;
close c2;
END;
